# Sentinel-1 Soil Moisture Estimation <img align="right" src="Doc/sentinel-1.jpg" width="250">

[![DOI](https://zenodo.org/badge/DOI/10.5281/zenodo.15265174.svg)](https://doi.org/10.5281/zenodo.15265174)
[![License: GPL 3.0](https://img.shields.io/badge/License-GPL%203.0-blue.svg)](LICENSE)
[![Open Source Love](https://badges.frapsoft.com/os/v1/open-source.svg?v=103)](https://github.com/ellerbrock/open-source-badges/)
[![Release](https://img.shields.io/badge/release-v1.0-brightgreen.svg)](https://github.com/aanwarigeo/sentinel-1-soil-moisture/releases/tag/1.0)



<img align="lift" src="Doc/Sentinel1SMBanner.gif" width="%100">

## Overview

This repository outlines a step-by-step workflow for estimating soil moisture at the field scale using Sentinel-1 Ground Range Detected (GRD) Synthetic Aperture Radar (SAR) data. The approach combines the Dual-Polarization Radar Vegetation Index (DpRVI<sub>c</sub>) with a change detection-based algorithm (CDA) for better accuracy during cropping period.

For a detailed explanation of the methodology, please refer to the research paper by [Bhogapurapu et al. (2022)](https://doi.org/10.1016/j.asr.2022.03.019).

### Key Findings

**Model Performance**: Correlation coefficient (r) = 0.75, RMSE = 0.095 m<sup>3</sup> m<sup>-3</sup>.

---

## Workflow

### 1. Preparing Sentinel-1 Data Using Google Earth Engine

This section guides you through preprocessing Sentinel-1 GRD SAR scenes (VV/VH, 10m resolution) with [Google Earth Engine](https://www.sciencedirect.com/topics/earth-and-planetary-sciences/google-earth-engine). The process involves:


- **Calculating the Dual-Polarization Radar Vegetation Index (DpRVI<sub>c</sub>)** to reduce vegetation influence on SAR backscatter intensity.
- **Preparing the backscatter intensity** in vertical-vertical polarization (VV<sub>dB</sub>).

<img align="lift" src="Doc/FreamworkDesign-01.png" width="%100">

For your convenience:

- [Access the Google Earth Engine code for Step 1](https://code.earthengine.google.com/7c1e52eaa51eb2c931434f62b1e3bba6)

<!-- - [Visit the Google Earth Engine App](https://ee-eranwari.projects.earthengine.app/view/sentinel-1-polarimetric-explorer-morocco) to filter Sentinel-1 SAR imagery by date, visualize various polarimetric descriptors, and download the processed image collection in GeoTIFF format for additional analysis if you prefer not to use the code. -->



### 2. Dry and Wet Reference Calibration

In this step, you will calculate:

- **Dry Reference Backscatter Intensity (σ°<sub>dry</sub>)**
- **Backscatter Change (Δσ)**
- **Maximum Backscatter Change (Δσ<sub>max</sub>)** by preforming pixel based regression analysis between the backscatter change (Δσ) and the Dual-Polarization Radar Vegetation Index (DpRVI<sub>c</sub>)

<img align="lift" src="Doc/FreamworkDesign-02.png" width="%100">

This step is implemented using an [R-script](R-scripts/step2-wet-dry-reference-calibration.R), which processes the GeoTIFF stack output from [Step 1](#1-Preparing-Sentinel-1-Data-Using-Google-Earth-Engine).



### 3. Soil Moisture Estimation and Validation

The second [R-script](R-scripts/step3-soil-moisture-estimation.R) handles the estimation of **relative soil moisture (Θ)**, calculated as the ratio of backscatter change to the maximum backscatter change (Δσ). 

This relative soil moisture (Θ) is then **normalized to field measurements** using the **field capacity** and **wilting point** values to derive **volumetric soil moisture (Θ<sub>v</sub>)**.

In the final, **temporal plot** was generated by overlaying the measured in-situ soil moisture data with the **Sentinel-1–based soil moisture estimates** at selected sample points.

The results show strong model performance:  
- **Correlation coefficient (r):** 0.75  
- **RMSE:** 0.095 m<sup>3</sup>/m<sup>3</sup>

<img align="lift" src="Doc/FreamworkDesign-03.png" width="%100">



### 4. Soil Moisture Mapping

In the final step, a **soil moisture map** was generated using [**QGIS**](https://www.qgis.org/). This map, saved as a single **GeoTIFF file**, represents soil moisture distribution on a selected date, in this case it was 2019-03-11. 

The visualization highlights spatial variation in soil moisture, specifically comparing the soil moisture between **No-tillage** vs **Conventional** agricultural practices.

<img align="lift" src="Doc/FreamworkDesign-04.png" width="%100">


